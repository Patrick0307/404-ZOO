# ğŸ® 404 ZOO

<div align="center">

**A Blockchain-Powered Card Collection & Auto-Battler Game on Solana**

[![Demo](https://img.shields.io/badge/ğŸ®_Live_Demo-404--zoo.vercel.app-00D4AA?style=for-the-badge)](https://404-zoo.vercel.app/)
[![YouTube](https://img.shields.io/badge/ğŸ“º_YouTube-Demo_Video-FF0000?style=for-the-badge)](https://www.youtube.com/watch?v=39usbbKn4r4)
[![Solana](https://img.shields.io/badge/Solana-Devnet-9945FF?style=for-the-badge&logo=solana)](https://solana.com/)

</div>

---

## ğŸ“– Overview

**404 ZOO** is a Web3 game that combines **Gacha card collection**, **NFT ownership**, and **auto-battler PvP gameplay**. Players connect their Phantom wallet to collect unique monster cards as on-chain NFTs, build strategic decks, and compete against other players in real-time battles.

### âœ¨ Key Features

| Feature | Description |
|---------|-------------|
| ğŸ° **Gacha System** | Draw cards with different rarities using BUG tokens |
| ğŸƒ **NFT Cards** | Each card is a unique on-chain NFT with randomized stats |
| âš”ï¸ **Real-time PvP** | Auto-battler gameplay with strategic unit placement |
| ğŸª **Marketplace** | Trade cards with other players using BUG tokens |
| ğŸ† **Leaderboard** | On-chain trophy ranking system |
| ğŸ’° **Token Economy** | SOL â†’ BUG token exchange for in-game purchases |

---

## ğŸ—ï¸ System Architecture


### High-Level Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              404 ZOO ARCHITECTURE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Frontend   â”‚     â”‚   Backend    â”‚     â”‚      Solana Blockchain       â”‚ â”‚
â”‚  â”‚  (React App) â”‚     â”‚  (WebSocket) â”‚     â”‚      (Smart Contract)        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                    â”‚                            â”‚                  â”‚
â”‚         â”‚  Real-time PvP     â”‚                            â”‚                  â”‚
â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                            â”‚                  â”‚
â”‚         â”‚   WebSocket        â”‚                            â”‚                  â”‚
â”‚         â”‚                    â”‚     Trophy Updates         â”‚                  â”‚
â”‚         â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
â”‚         â”‚                    â”‚                            â”‚                  â”‚
â”‚         â”‚         On-chain Operations                     â”‚                  â”‚
â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
â”‚         â”‚    (Gacha, NFT Mint, Market, Profile)          â”‚                  â”‚
â”‚         â”‚                                                 â”‚                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Phantom    â”‚                              â”‚   Program (Rust)  â”‚        â”‚
â”‚  â”‚   Wallet     â”‚                              â”‚   - GameConfig    â”‚        â”‚
â”‚  â”‚              â”‚                              â”‚   - PlayerProfile â”‚        â”‚
â”‚  â”‚  - Sign Tx   â”‚                              â”‚   - CardTemplate  â”‚        â”‚
â”‚  â”‚  - Pay Gas   â”‚                              â”‚   - CardInstance  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚   - Marketplace   â”‚        â”‚
â”‚                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Component Interaction Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DATA FLOW DIAGRAM                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  [User Action]                                                               â”‚
â”‚       â”‚                                                                      â”‚
â”‚       â–¼                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTP/WS     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    RPC Calls    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Browser â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Backend â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   Solana    â”‚    â”‚
â”‚  â”‚  React  â”‚                â”‚ Node.js â”‚                 â”‚   Devnet    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚       â”‚                          â”‚                             â”‚           â”‚
â”‚       â”‚ Wallet Adapter           â”‚ Match Results               â”‚ On-chain  â”‚
â”‚       â–¼                          â–¼                             â–¼           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Phantom â”‚              â”‚  Rooms &  â”‚               â”‚   Accounts  â”‚      â”‚
â”‚  â”‚ Wallet  â”‚              â”‚  Players  â”‚               â”‚   - PDA     â”‚      â”‚
â”‚  â”‚         â”‚              â”‚  (Memory) â”‚               â”‚   - NFTs    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Project Structure

```
404-zoo/
â”œâ”€â”€ 404-zoo/              # Frontend Application
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/   # React Components
â”‚   â”‚   â”œâ”€â”€ services/     # Blockchain & WebSocket Services
â”‚   â”‚   â”œâ”€â”€ css/          # Stylesheets
â”‚   â”‚   â””â”€â”€ App.tsx       # Application Entry
â”‚   â”œâ”€â”€ public/           # Static Assets
â”‚   â””â”€â”€ 404-card/         # Card Image Assets
â”‚
â”œâ”€â”€ 404-backend/          # Backend Server
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ server.js     # WebSocket Server
â”‚       â””â”€â”€ contract.js   # On-chain Trophy Updates
â”‚
â”œâ”€â”€ 404-contract/         # Smart Contract
â”‚   â””â”€â”€ src/
â”‚       â””â”€â”€ lib.rs        # Anchor Program
â”‚
â””â”€â”€ start.bat             # One-click Startup Script
```

---

## ğŸ–¥ï¸ Frontend Architecture (404-zoo)

### Technology Stack
- **Framework**: React 19 with TypeScript
- **Build Tool**: Vite 7
- **3D Graphics**: Three.js
- **Blockchain**: @solana/web3.js, @coral-xyz/anchor
- **Wallet**: @solana/wallet-adapter


### Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND COMPONENT TREE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  App.tsx (Router & Auth State)                                               â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ ConnectWallet.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Phantom wallet connection                 â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â””â”€â”€ MainLayout.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Main game interface                      â”‚
â”‚      â”‚                                                                       â”‚
â”‚      â”œâ”€â”€ DrawerMenu.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Navigation sidebar                       â”‚
â”‚      â”œâ”€â”€ UserProfile.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Player stats & registration              â”‚
â”‚      â”‚                                                                       â”‚
â”‚      â”œâ”€â”€ GachaPage.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Card drawing system                      â”‚
â”‚      â”‚   â””â”€â”€ Single/Multi draw animations                                    â”‚
â”‚      â”‚   â””â”€â”€ Rarity-based visual effects                                     â”‚
â”‚      â”‚                                                                       â”‚
â”‚      â”œâ”€â”€ Backpack.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Card inventory management                â”‚
â”‚      â”‚   â””â”€â”€ Card filtering & sorting                                        â”‚
â”‚      â”‚   â””â”€â”€ Card detail modal                                               â”‚
â”‚      â”‚                                                                       â”‚
â”‚      â”œâ”€â”€ TeamBuilder.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Deck building interface                  â”‚
â”‚      â”‚   â””â”€â”€ Drag & drop card selection                                      â”‚
â”‚      â”‚   â””â”€â”€ Multiple deck slots                                             â”‚
â”‚      â”‚                                                                       â”‚
â”‚      â”œâ”€â”€ Marketplace.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Card trading                             â”‚
â”‚      â”‚   â”œâ”€â”€ Market tab (buy/sell cards)                                     â”‚
â”‚      â”‚   â”œâ”€â”€ BUG Topup tab (SOL â†’ BUG)                                       â”‚
â”‚      â”‚   â””â”€â”€ Tickets tab (BUG â†’ Gacha tickets)                               â”‚
â”‚      â”‚                                                                       â”‚
â”‚      â”œâ”€â”€ ArenaBattle.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PvP battle system                        â”‚
â”‚      â”‚   â”œâ”€â”€ Matching phase                                                  â”‚
â”‚      â”‚   â”œâ”€â”€ Preparation phase (buy/place units)                             â”‚
â”‚      â”‚   â”œâ”€â”€ Battle phase (auto-combat)                                      â”‚
â”‚      â”‚   â””â”€â”€ Settlement phase                                                â”‚
â”‚      â”‚                                                                       â”‚
â”‚      â”œâ”€â”€ Pokedex.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Monster encyclopedia                     â”‚
â”‚      â”‚                                                                       â”‚
â”‚      â””â”€â”€ Leaderboard.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Trophy rankings                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Service Layer Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SERVICE LAYER                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  services/                                                                   â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ contract.ts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Solana Contract Interactions             â”‚
â”‚  â”‚   â”‚                                                                       â”‚
â”‚  â”‚   â”œâ”€â”€ Connection Management                                               â”‚
â”‚  â”‚   â”‚   â””â”€â”€ Devnet RPC connection                                           â”‚
â”‚  â”‚   â”‚                                                                       â”‚
â”‚  â”‚   â”œâ”€â”€ Account Operations                                                  â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ getPlayerProfile()      - Fetch player data                     â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ registerPlayer()        - Create player account                 â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ getCardTemplate()       - Fetch card definitions                â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ getPlayerCards()        - Fetch owned NFTs                      â”‚
â”‚  â”‚   â”‚   â””â”€â”€ getAllPlayerProfiles()  - Leaderboard data                      â”‚
â”‚  â”‚   â”‚                                                                       â”‚
â”‚  â”‚   â”œâ”€â”€ Transaction Operations                                              â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ claimStarterTickets()   - Free tickets for new players          â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ gachaDraw()             - Single card draw                      â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ gachaDrawMultiple()     - Multi-draw (batch signing)            â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ buyBugTokens()          - SOL â†’ BUG exchange                    â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ buyGachaTickets()       - BUG â†’ Tickets                         â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ saveDeck()              - Save deck configuration               â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ listCard()              - List card for sale                    â”‚
â”‚  â”‚   â”‚   â””â”€â”€ buyCard()               - Purchase listed card                  â”‚
â”‚  â”‚   â”‚                                                                       â”‚
â”‚  â”‚   â””â”€â”€ PDA Derivation                                                      â”‚
â”‚  â”‚       â”œâ”€â”€ getPlayerProfilePDA()                                           â”‚
â”‚  â”‚       â”œâ”€â”€ getCardTemplatePDA()                                            â”‚
â”‚  â”‚       â”œâ”€â”€ getCardInstancePDA()                                            â”‚
â”‚  â”‚       â””â”€â”€ getPlayerDeckPDA()                                              â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ battleSocket.ts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ WebSocket Battle Communication           â”‚
â”‚  â”‚   â”‚                                                                       â”‚
â”‚  â”‚   â”œâ”€â”€ Connection                                                          â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ connect()               - Establish WS connection               â”‚
â”‚  â”‚   â”‚   â””â”€â”€ disconnect()            - Close connection                      â”‚
â”‚  â”‚   â”‚                                                                       â”‚
â”‚  â”‚   â”œâ”€â”€ Matchmaking                                                         â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ startMatching()         - Enter match queue                     â”‚
â”‚  â”‚   â”‚   â””â”€â”€ cancelMatching()        - Leave queue                           â”‚
â”‚  â”‚   â”‚                                                                       â”‚
â”‚  â”‚   â””â”€â”€ Battle Actions                                                      â”‚
â”‚  â”‚       â”œâ”€â”€ placeUnit()             - Place unit on board                   â”‚
â”‚  â”‚       â”œâ”€â”€ removeUnit()            - Remove from board                     â”‚
â”‚  â”‚       â”œâ”€â”€ refreshShop()           - Refresh card shop                     â”‚
â”‚  â”‚       â””â”€â”€ sendAction()            - Generic action sender                 â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ cardCache.ts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Card Template Caching                    â”‚
â”‚  â”‚   â”œâ”€â”€ loadAndCacheCards()         - Preload all templates                 â”‚
â”‚  â”‚   â”œâ”€â”€ getCachedCards()            - Get from cache                        â”‚
â”‚  â”‚   â””â”€â”€ getImageUrl()               - Resolve image paths                   â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â””â”€â”€ playerDataCache.ts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Player Data Caching                      â”‚
â”‚      â”œâ”€â”€ preloadPlayerData()         - Cache cards & decks                   â”‚
â”‚      â”œâ”€â”€ getCachedPlayerCards()      - Get cached cards                      â”‚
â”‚      â””â”€â”€ clearPlayerDataCache()      - Clear on disconnect                   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ Backend Architecture (404-backend)

### Technology Stack
- **Runtime**: Node.js (ES Modules)
- **WebSocket**: ws library
- **Blockchain**: @solana/web3.js


### Server Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BACKEND SERVER ARCHITECTURE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        WebSocket Server (ws)                         â”‚    â”‚
â”‚  â”‚                         Port: 8080                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                          State Management                            â”‚    â”‚
â”‚  â”‚                                 â”‚                                    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â”‚
â”‚  â”‚  â”‚   players    â”‚  â”‚      matchQueue       â”‚  â”‚    rooms     â”‚      â”‚    â”‚
â”‚  â”‚  â”‚   Map<>      â”‚  â”‚      Array<>          â”‚  â”‚    Map<>     â”‚      â”‚    â”‚
â”‚  â”‚  â”‚              â”‚  â”‚                       â”‚  â”‚              â”‚      â”‚    â”‚
â”‚  â”‚  â”‚ - odId       â”‚  â”‚ - Player IDs waiting  â”‚  â”‚ - roomId     â”‚      â”‚    â”‚
â”‚  â”‚  â”‚ - ws         â”‚  â”‚   for match           â”‚  â”‚ - players[]  â”‚      â”‚    â”‚
â”‚  â”‚  â”‚ - name       â”‚  â”‚                       â”‚  â”‚ - state      â”‚      â”‚    â”‚
â”‚  â”‚  â”‚ - rating     â”‚  â”‚                       â”‚  â”‚ - timer      â”‚      â”‚    â”‚
â”‚  â”‚  â”‚ - deck       â”‚  â”‚                       â”‚  â”‚              â”‚      â”‚    â”‚
â”‚  â”‚  â”‚ - status     â”‚  â”‚                       â”‚  â”‚              â”‚      â”‚    â”‚
â”‚  â”‚  â”‚ - roomId     â”‚  â”‚                       â”‚  â”‚              â”‚      â”‚    â”‚
â”‚  â”‚  â”‚ - wallet     â”‚  â”‚                       â”‚  â”‚              â”‚      â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         Room State Structure                          â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  {                                                                    â”‚   â”‚
â”‚  â”‚    id: "uuid",                                                        â”‚   â”‚
â”‚  â”‚    players: ["p1_odId", "p2_odId"],                                   â”‚   â”‚
â”‚  â”‚    state: {                                                           â”‚   â”‚
â”‚  â”‚      round: 1,                                                        â”‚   â”‚
â”‚  â”‚      phase: "preparation" | "battle",                                 â”‚   â”‚
â”‚  â”‚      timer: 30,                                                       â”‚   â”‚
â”‚  â”‚      playerStates: {                                                  â”‚   â”‚
â”‚  â”‚        [odId]: {                                                      â”‚   â”‚
â”‚  â”‚          hp: 100,                                                     â”‚   â”‚
â”‚  â”‚          gold: 10,                                                    â”‚   â”‚
â”‚  â”‚          units: BattleUnit[],    // On battlefield                    â”‚   â”‚
â”‚  â”‚          bench: BattleUnit[],    // Reserve units                     â”‚   â”‚
â”‚  â”‚          ready: false,                                                â”‚   â”‚
â”‚  â”‚          battleDone: false                                            â”‚   â”‚
â”‚  â”‚        }                                                              â”‚   â”‚
â”‚  â”‚      }                                                                â”‚   â”‚
â”‚  â”‚    },                                                                 â”‚   â”‚
â”‚  â”‚    timerInterval: NodeJS.Timer                                        â”‚   â”‚
â”‚  â”‚  }                                                                    â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Battle Flow (Server-Authoritative)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           BATTLE FLOW DIAGRAM                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  [MATCHING PHASE]                                                            â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”‚  Player A â”€â”€â–º start_match â”€â”€â–º matchQueue.push(A)                          â”‚
â”‚  â”‚  Player B â”€â”€â–º start_match â”€â”€â–º matchQueue.push(B)                          â”‚
â”‚  â”‚                    â”‚                                                      â”‚
â”‚  â”‚                    â–¼                                                      â”‚
â”‚  â”‚              tryMatch() â”€â”€â–º Creates Room â”€â”€â–º match_found to both          â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â–¼                                                                           â”‚
â”‚  [PREPARATION PHASE] (30 seconds)                                            â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  â”‚  Timer: 30s countdown                                            â”‚     â”‚
â”‚  â”‚  â”‚                                                                  â”‚     â”‚
â”‚  â”‚  â”‚  Player Actions:                                                 â”‚     â”‚
â”‚  â”‚  â”‚  â€¢ buy_card    â†’ Deduct gold, add to bench                       â”‚     â”‚
â”‚  â”‚  â”‚  â€¢ place_unit  â†’ Move from bench to battlefield                  â”‚     â”‚
â”‚  â”‚  â”‚  â€¢ remove_unit â†’ Move from battlefield to bench                  â”‚     â”‚
â”‚  â”‚  â”‚  â€¢ refresh_shop â†’ Spend gold to refresh cards                    â”‚     â”‚
â”‚  â”‚  â”‚                                                                  â”‚     â”‚
â”‚  â”‚  â”‚  Auto-merge: 3 same cards (same type + star) â†’ 1 higher star     â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”‚                    â”‚                                                      â”‚
â”‚  â”‚                    â–¼ (timer = 0 OR both ready)                            â”‚
â”‚  â–¼                                                                           â”‚
â”‚  [BATTLE PHASE] (Server-computed)                                            â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  â”‚  1. Coin Flip â†’ Determine first attacker                         â”‚     â”‚
â”‚  â”‚  â”‚                                                                  â”‚     â”‚
â”‚  â”‚  â”‚  2. Turn Loop (position 0â†’7):                                    â”‚     â”‚
â”‚  â”‚  â”‚     â”‚                                                            â”‚     â”‚
â”‚  â”‚  â”‚     â”œâ”€â–º First player's unit at position attacks                  â”‚     â”‚
â”‚  â”‚  â”‚     â”‚   â””â”€â–º Target selection based on trait:                     â”‚     â”‚
â”‚  â”‚  â”‚     â”‚       â€¢ Warrior: Front row, same position priority         â”‚     â”‚
â”‚  â”‚  â”‚     â”‚       â€¢ Archer: Back row, same position priority           â”‚     â”‚
â”‚  â”‚  â”‚     â”‚       â€¢ Assassin: Lowest HP enemy                          â”‚     â”‚
â”‚  â”‚  â”‚     â”‚                                                            â”‚     â”‚
â”‚  â”‚  â”‚     â””â”€â–º Second player's unit at position counter-attacks         â”‚     â”‚
â”‚  â”‚  â”‚                                                                  â”‚     â”‚
â”‚  â”‚  â”‚  3. Broadcast: battle_attack events with damage                  â”‚     â”‚
â”‚  â”‚  â”‚  4. Broadcast: battle_units_update with HP changes               â”‚     â”‚
â”‚  â”‚  â”‚  5. Continue until one side eliminated                           â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”‚                    â”‚                                                      â”‚
â”‚  â”‚                    â–¼                                                      â”‚
â”‚  â–¼                                                                           â”‚
â”‚  [SETTLEMENT PHASE]                                                          â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”‚  â€¢ Winner: +trophies (30 + win_streak), +100 BUG                          â”‚
â”‚  â”‚  â€¢ Loser:  -HP (roundÂ²), -30 trophies, win_streak reset                   â”‚
â”‚  â”‚  â€¢ Draw:   Both -HP (roundÂ²/2)                                            â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”‚  If HP > 0 for both â†’ Next round (round++)                                â”‚
â”‚  â”‚  If HP â‰¤ 0 for either â†’ Game Over                                         â”‚
â”‚  â”‚                    â”‚                                                      â”‚
â”‚  â”‚                    â–¼                                                      â”‚
â”‚  â””â”€â”€â–º [GAME OVER] â†’ recordMatchResult() on blockchain                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## â›“ï¸ Smart Contract Architecture (404-contract)

### Technology Stack
- **Language**: Rust
- **Framework**: Anchor 0.29.0
- **Token Standard**: SPL Token
- **Network**: Solana Devnet


### Account Structure (PDAs)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SOLANA ACCOUNT ARCHITECTURE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Program ID: F27HZp9MUiCx3oXz53kA6A5VsKQTVsiRcpBtADJrgapB                    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                         GameConfig (Singleton)                       â”‚    â”‚
â”‚  â”‚  PDA: ["game_config"]                                                â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚  authority: Pubkey          // Admin wallet                  â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  card_creators: Vec<Pubkey> // Authorized creators (max 10)  â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  normal_pack_price: u64     // Pack price in BUG             â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  starter_pack_card_count: u8 // Cards per pack (10)          â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  sol_to_bug_rate: u64       // Exchange rate (10000)         â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  ticket_price: u64          // Ticket price in BUG           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  bump: u8                                                    â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    CardTemplate (Per Card Type)                      â”‚    â”‚
â”‚  â”‚  PDA: ["card_template", card_type_id.to_le_bytes()]                  â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚  card_type_id: u32          // Unique identifier             â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  name: String               // Card name (max 32 chars)      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  trait_type: TraitType      // Warrior/Archer/Assassin       â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  rarity: Rarity             // Common/Rare/Legendary         â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  min_attack: u16            // Minimum attack stat           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  max_attack: u16            // Maximum attack stat           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  min_health: u16            // Minimum health stat           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  max_health: u16            // Maximum health stat           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  description: String        // Card description (max 200)    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  image_uri: String          // Image path (max 200)          â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  bump: u8                                                    â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    PlayerProfile (Per Player)                        â”‚    â”‚
â”‚  â”‚  PDA: ["player_profile", player_pubkey]                              â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚  wallet: Pubkey             // Player's wallet address       â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  username: String           // Display name (max 32 chars)   â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  has_claimed_starter_pack: bool // Free tickets claimed?     â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  gacha_tickets: u64         // Available draw tickets        â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  bug_balance: u64           // BUG token balance             â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  trophies: u32              // Ranking score                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  total_wins: u32            // Lifetime wins                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  total_losses: u32          // Lifetime losses               â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  win_streak: u32            // Current win streak            â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  bump: u8                                                    â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    CardInstance (Per NFT)                            â”‚    â”‚
â”‚  â”‚  PDA: ["card_instance", mint_pubkey]                                 â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚  mint: Pubkey               // SPL Token mint address        â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  card_type_id: u32          // Reference to CardTemplate     â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  attack: u16                // Rolled attack value           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  health: u16                // Rolled health value           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  owner: Pubkey              // Current owner                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  bump: u8                                                    â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    PlayerDeck (Per Deck Slot)                        â”‚    â”‚
â”‚  â”‚  PDA: ["player_deck", player_pubkey, deck_index]                     â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚  owner: Pubkey              // Deck owner                    â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  deck_index: u8             // Slot number (0-4)             â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  deck_name: String          // Deck name                     â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  card_mints: Vec<Pubkey>    // Card NFT addresses (max 10)   â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  is_active: bool            // Deck enabled?                 â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  bump: u8                                                    â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Listing (Marketplace)                             â”‚    â”‚
â”‚  â”‚  PDA: ["listing", card_mint]                                         â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚  seller: Pubkey             // Seller's wallet               â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  card_mint: Pubkey          // NFT being sold                â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  price: u64                 // Price in BUG tokens           â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  is_active: bool            // Listing active?               â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  created_at: i64            // Timestamp                     â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  bump: u8                                                    â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Contract Instructions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CONTRACT INSTRUCTIONS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  ADMIN INSTRUCTIONS                                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ initialize(normal_pack_price, sol_to_bug_rate, ticket_price)            â”‚
â”‚  â”‚   â””â”€â”€ Creates GameConfig singleton                                        â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ add_card_creator(new_creator: Pubkey)                                   â”‚
â”‚  â”‚   â””â”€â”€ Authorizes address to create card templates                         â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ create_card_template(card_type_id, name, trait, rarity, stats, ...)     â”‚
â”‚  â”‚   â””â”€â”€ Defines a new card type                                             â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ update_rarity_pool(rarity, card_type_ids)                               â”‚
â”‚  â”‚   â””â”€â”€ Adds cards to gacha pools                                           â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â””â”€â”€ add_gacha_tickets(player, amount)                                       â”‚
â”‚      â””â”€â”€ Admin grants tickets to player                                      â”‚
â”‚                                                                              â”‚
â”‚  PLAYER INSTRUCTIONS                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ register_player(username)                                               â”‚
â”‚  â”‚   â””â”€â”€ Creates PlayerProfile PDA                                           â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ claim_starter_tickets()                                                 â”‚
â”‚  â”‚   â””â”€â”€ Grants 10 free tickets (one-time)                                   â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ buy_bug_tokens(sol_amount)                                              â”‚
â”‚  â”‚   â””â”€â”€ Exchanges SOL for BUG (1 SOL = 10,000 BUG)                          â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ buy_gacha_tickets(ticket_count)                                         â”‚
â”‚  â”‚   â””â”€â”€ Purchases tickets with BUG balance                                  â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ gacha_draw()                                                            â”‚
â”‚  â”‚   â””â”€â”€ Mints 1 NFT card, deducts 1 ticket                                  â”‚
â”‚  â”‚   â””â”€â”€ Rolls random stats within template range                            â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ save_deck(deck_index, deck_name, card_mints)                            â”‚
â”‚  â”‚   â””â”€â”€ Saves deck configuration (max 10 cards)                             â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â””â”€â”€ delete_deck(deck_index)                                                 â”‚
â”‚      â””â”€â”€ Deactivates deck slot                                               â”‚
â”‚                                                                              â”‚
â”‚  MARKETPLACE INSTRUCTIONS                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ list_card(price)                                                        â”‚
â”‚  â”‚   â””â”€â”€ Lists NFT for sale, transfers to escrow                             â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â”œâ”€â”€ cancel_listing()                                                        â”‚
â”‚  â”‚   â””â”€â”€ Returns NFT to seller, closes listing                               â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â””â”€â”€ buy_card()                                                              â”‚
â”‚      â””â”€â”€ Transfers BUG to seller (minus 2.5% fee)                            â”‚
â”‚      â””â”€â”€ Transfers NFT to buyer                                              â”‚
â”‚      â””â”€â”€ Updates CardInstance owner                                          â”‚
â”‚                                                                              â”‚
â”‚  BATTLE INSTRUCTIONS                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”‚                                                                           â”‚
â”‚  â””â”€â”€ record_match_result(winner, loser)                                      â”‚
â”‚      â””â”€â”€ Winner: +trophies (30 + streak), +100 BUG, streak++                 â”‚
â”‚      â””â”€â”€ Loser: -30 trophies, streak = 0                                     â”‚
â”‚      â””â”€â”€ Updates total_wins/total_losses                                     â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ´ Card System

### Rarity Distribution

| Rarity | Stars | Drop Rate | Shop Price | Sell Price |
|--------|-------|-----------|------------|------------|
| Common | â˜…â˜…â˜… | 70% | 3 Gold | 1 Gold |
| Rare | â˜…â˜…â˜…â˜… | 27% | 5 Gold | 2 Gold |
| Legendary | â˜…â˜…â˜…â˜…â˜… | 3% | 7 Gold | 3 Gold |

### Trait System (Classes)

| Trait | Target Priority | Strategy |
|-------|-----------------|----------|
| âš”ï¸ Warrior | Front row â†’ Same position | Tank, frontline |
| ğŸ¹ Archer | Back row â†’ Same position | Backline damage |
| ğŸ—¡ï¸ Assassin | Lowest HP enemy | Burst damage |


### Star Upgrade System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           STAR UPGRADE SYSTEM                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  3x â˜… (Same Card Type) â”€â”€â–º 1x â˜…â˜…                                            â”‚
â”‚  3x â˜…â˜… (Same Card Type) â”€â”€â–º 1x â˜…â˜…â˜…                                          â”‚
â”‚                                                                              â”‚
â”‚  Stats Scaling:                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   Star     â”‚   Attack    â”‚   Health    â”‚   Sell      â”‚                   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
â”‚  â”‚   â˜…        â”‚   Base      â”‚   Base      â”‚   Base      â”‚                   â”‚
â”‚  â”‚   â˜…â˜…       â”‚   Base Ã— 2  â”‚   Base Ã— 2  â”‚   Base Ã— 2  â”‚                   â”‚
â”‚  â”‚   â˜…â˜…â˜…      â”‚   Base Ã— 3  â”‚   Base Ã— 3  â”‚   Base Ã— 3  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— WebSocket Protocol

### Message Types

#### Client â†’ Server

| Type | Description | Payload |
|------|-------------|---------|
| `set_profile` | Set player info | `{ name, rating, wallet }` |
| `start_match` | Enter matchmaking | `{ deck: { deckId, cardMints } }` |
| `cancel_match` | Leave queue | - |
| `player_action` | Game action | `{ action, data }` |
| `ready` | Ready for battle | - |
| `sync_state` | Sync state | `{ hp, gold, units, bench }` |

#### Server â†’ Client

| Type | Description | Payload |
|------|-------------|---------|
| `connected` | Connection established | `{ odId }` |
| `matching_started` | Entered queue | `{ position }` |
| `match_found` | Match created | `{ roomId, playerId, opponent }` |
| `matching_cancelled` | Left queue | - |
| `round_start` | Round begins | `{ round, phase, timer }` |
| `timer_update` | Timer tick | `{ timer }` |
| `coin_flip` | First attacker | `{ result, firstName }` |
| `battle_start` | Battle begins | `{ round, p1Units, p2Units }` |
| `battle_attack` | Attack event | `{ attacker, target, damage, log }` |
| `battle_units_update` | HP sync | `{ p1Units, p2Units }` |
| `battle_result` | Round result | `{ result, myHP, opponentHP, round }` |
| `opponent_sync` | Opponent state | `{ units, bench, gold }` |
| `opponent_disconnected` | Opponent left | - |
| `game_over` | Game ended | `{ winner, p1HP, p2HP }` |
| `trophy_updated` | On-chain update | `{ type, txId }` |

---

## ğŸš€ Getting Started

### Prerequisites

- Node.js 18+
- Phantom Wallet browser extension
- Solana Devnet SOL (for testing)

### Quick Start (Windows)

```bash
# Double-click to run
start.bat
```

This script will:
1. Install backend dependencies (if needed)
2. Install frontend dependencies (if needed)
3. Start backend server on port 8080
4. Start frontend dev server on port 5173

### Manual Setup

#### 1. Install Dependencies

```bash
# Backend
cd 404-backend
npm install

# Frontend
cd ../404-zoo
npm install
```

#### 2. Configure Environment

**Backend (404-backend/.env)**
```env
PORT=8080
AUTHORITY_SEED=your_seed_phrase_here  # For trophy updates
```

**Frontend (404-zoo/.env)**
```env
VITE_WS_SERVER=ws://localhost:8080
```

#### 3. Start Services

```bash
# Terminal 1 - Backend
cd 404-backend
npm start

# Terminal 2 - Frontend
cd 404-zoo
npm start
```

#### 4. Access the Game

- Frontend: http://localhost:5173
- Backend WebSocket: ws://localhost:8080
- Health Check: http://localhost:8080/health

---

## ğŸŒ Deployment

### Frontend (Vercel)

The frontend is deployed on Vercel with automatic deployments from the main branch.

**vercel.json configuration:**
```json
{
  "rewrites": [
    { "source": "/(.*)", "destination": "/" }
  ]
}
```

### Backend (Render)

The WebSocket server is deployed on Render as a Web Service.

**Key configurations:**
- Build Command: `npm install`
- Start Command: `npm start`
- Health Check Path: `/health`

### Smart Contract (Solana Devnet)

Deployed using Solana Playground or Anchor CLI.

**Current Program ID:** `F27HZp9MUiCx3oXz53kA6A5VsKQTVsiRcpBtADJrgapB`

---

## ğŸ¨ Card Gallery

The game features 30+ unique monster cards inspired by HTTP status codes and system errors:

**HTTP Error Series:**
- 400 Bad Request Beetle
- 401 Unauthorized Mushroom
- 403 Wolf
- 404 Deer
- 409 Conflict T-Rex
- 418 Teapot Giant
- 500 Bear
- 502 Bad Gateway Snake
- 503 Service Unavailable Giant
- 504 Gateway Timeout Serpent

**System Error Series:**
- ENOENT Ghoul
- ENOMEM Penguin
- EIO Ghost
- EPERM Zombie
- ESRCH Lion

**Special Series:**
- Null Dragon
- Quantum Bug
- Overflow Seraph
- Ghost Packet

---

## ğŸ“„ License

This project was built for a hackathon. All rights reserved.

---

<div align="center">

**Built with â¤ï¸ on Solana**

[ğŸ® Play Now](https://404-zoo.vercel.app/) | [ğŸ“º Watch Demo](https://www.youtube.com/watch?v=39usbbKn4r4)

</div>
